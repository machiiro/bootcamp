# vi でファイルを編集する

Linux で利用可能な vi エディタを使って、ファイルを編集するための基本的な操作について説明します。
vi の拡張である vim (Vi improved) でも同様の操作が可能です。

## ファイルを開く

vi コマンドでファイルを指定し、エディタを起動します。
ファイルが存在しない場合は新規にファイルを開いた状態で起動します。

```bash
$ vi foo.txt
```

## モードの切替

vi エディタには以下のモードがあり、モードを切り替えながら編集を行っていきます。

|モード|用途|
| --- | --- |
| ノーマルモード | 起動時の初期モード。カーソルの移動やコピーペーストなどを行う。 |
| 挿入モード | `i` などから切り替える。実際に文字を入力する際のモード。 |
| コマンドモード | `:` や `/` から切り替える。検索・置換や設定変更など、様々な操作が可能。 |

## カーソルの移動

|コマンド|挙動|
| --- | --- |
| h | 左に移動 |
| j | 下に移動 |
| k | 上に移動 |
| l | →に移動 |
| 0 (ゼロ) | 行の先頭に移動 |
| Shift + $ | 行の末尾に移動 |
| gg | 先頭行に移動 |
| Shift + g | 最終行に移動 |

## 編集操作

|コマンド|挙動|
| --- | --- |
| i | カーソルから挿入モードに切り替える |
| a | カーソルの次の文字から挿入モードに切り替える |
| ESC | ノーマルモードに切り替える |
| s | カーソルの文字を削除し、挿入モードに切り替える |
| cw | カーソルから始まる単語を削除し、挿入モードに切り替える |
| x | カーソルの文字を削除 |
| dd | カーソルの行を削除する |
| 2dd | カーソルの行を含めた 2 行を削除する |
| yy | カーソルの行をヤンク (コピー) する |
| 2yy | カーソルの行を含めた 2 行をヤンク (コピー) する |
| p | ヤンクした内容をコピーする |
| u | 直前の編集内容に戻す |

## 検索

|コマンド|挙動|
| --- | --- |
| /foo | `foo` という文字を検索 |
| 検索後に n | 次に検索にヒットする前方の文字にジャンプ |
| 検索後に Shift + n | 次に検索にヒットする後方の文字にジャンプ |

## 設定変更

|コマンド|挙動|
| --- | --- |
| :set number | 行番号を表示する |

## ファイル操作

|コマンド|挙動|
| --- | --- |
| :q | ファイルを閉じる (編集している場合は閉じることができない) |
| :q! | 強制的にファイルを閉じる |
| :w | ファイルを保存する |
| :wq | ファイルを保存して閉じる |
